<% scale_factor = (maze_processor.length + maze_processor.width).to_f/30 %>
<% scale_factor = 1 if scale_factor < 1 %>

<% top = 5; left = 5; %>
<% width = (maze_processor.length * 35 + 10)/scale_factor %>
<% height = (maze_processor.width * 35 + 10)/scale_factor %>

<div style="display: inline-block">
    <div class="maze" style="width:<%= width %>px; height:<%= height%>px;">    
        <% maze_processor.maze_array.each do |node| %>
            <% width = 30/scale_factor %>
            <% height = 30/scale_factor %>
            <span class="maze_cell <%= node.class_name %>" 
            style="width: <%= width %>px; height: <%= width %>px; top: <%= (top + node.y * 35)/scale_factor %>px; left: <%= (left + node.x * 35)/scale_factor %>px;">
                <% if node.is_barrier then %>
                    <svg id="Layer_1"
                        height="50" 
                        viewBox="-50 -20 <%= 1000*scale_factor %> <%= 1000*scale_factor %>" 
                        width="50" 
                        xmlns="http://www.w3.org/2000/svg"><g><g><path clip-rule="evenodd" d="m233.641 455.063h44.702v36.233c0 7.263-5.936 13.204-13.194 13.204h-18.314c-7.258 0-13.194-5.94-13.194-13.204z" fill="#95d6a4" fill-rule="evenodd"/></g><g><path clip-rule="evenodd" d="m151.439 296.254 104.567 148.027 104.174-147.914c.731-97.465-16.148-240.677-101.726-288.171-.788-.45-1.688-.676-2.644-.732-.956.056-1.829.282-2.616.732-38.204 21.199-62.707 61.457-78.067 108.191-19.075 57.994-24.082 125.927-23.688 179.867z" fill="#ffe07d" fill-rule="evenodd"/></g><g><path clip-rule="evenodd" d="m341.275 132.04c-5.064-18.13-11.365-35.529-19.13-51.519-15.079-31.052-35.728-56.784-63.691-72.324-.788-.45-1.688-.676-2.644-.732-.956.056-1.829.282-2.616.732-13.841 7.686-25.882 17.877-36.347 29.954 70.612 53.096 86.225 207.739 90.22 289.184.703 14.611 1.153 28.885 1.35 42.539l51.763-73.507s0 0 0-.028c.028-3.181.028-6.419.028-9.713-.225-47.325-4.754-103.799-18.933-154.586z" fill="#ffc77d" fill-rule="evenodd"/></g><g><path clip-rule="evenodd" d="m65.917 323.281c108.197 9.319 86.478 147.942 190.089 145.943v-24.943c0-27.252-16.12-87.189-52.945-118.579-89.291-76.153-182.662-6.363-137.144-2.421z" fill="#b3e59f" fill-rule="evenodd"/></g><g><path clip-rule="evenodd" d="m446.096 323.281c-108.197 9.319-86.507 147.942-190.089 145.943v-24.943c0-27.252 16.092-87.189 52.917-118.579 89.291-76.153 182.661-6.363 137.172-2.421z" fill="#b3e59f" fill-rule="evenodd"/></g><g><path clip-rule="evenodd" d="m297.304 460.412c58.656-30.405 57.98-129.305 148.791-137.132 25.657-2.224 7.117-25.422-29.961-31.531-79.36 17.399-77.588 118.721-118.83 168.663z" fill="#95d6a4" fill-rule="evenodd"/></g><g><path clip-rule="evenodd" d="m203.061 325.702c-17.414-14.836-34.968-24.155-51.623-29.476-68.783-21.959-122.15 23.873-85.522 27.055 9.452.816 17.92 2.618 25.544 5.208 24.672-5.912 59.781-4.42 95.846 18.553 6.245 3.97 12.491 8.587 18.736 13.907 23.153 19.735 38.119 50.703 46.024 77.786 1.604 5.405 2.898 10.67 3.91 15.625v-10.079-1.211c-.394-24.38-12.913-72.549-40.51-104.897-3.852-4.504-7.96-8.699-12.405-12.471z" fill="#95d6a4" fill-rule="evenodd"/></g><path d="m450.098 295.798c-15.716-9.581-38.599-14.318-61.208-12.68-7.101.515-14.179 1.641-21.19 3.346-.005-.078-.008-.157-.012-.235-.224-42.387-3.91-100.614-18.774-154.675-17.596-63.999-46.807-107.709-86.741-129.87-3.867-2.21-8.742-2.263-12.619-.046-36.202 20.088-63.64 57.907-81.552 112.406-19.177 58.309-23.831 124.218-24.073 172.338-6.896-1.656-13.855-2.753-20.837-3.259-22.611-1.638-45.489 3.106-61.203 12.69-11.376 6.939-16.862 15.347-15.048 23.069.919 3.917 4.537 10.668 18.437 11.872 28.108 2.405 48.917 13.966 67.473 37.488 2.566 3.253 7.282 3.807 10.534 1.243 3.252-2.566 3.808-7.282 1.243-10.534-21.05-26.683-45.826-40.392-77.963-43.142-2.182-.189-3.586-.526-4.451-.82 1.937-2.708 8.346-8.252 21.193-12.483 13.708-4.515 62.504-15.772 114.891 28.906 35.273 30.067 50.069 87.537 50.299 112.271l.008 17.927c-42.29-2.241-59.697-31.673-79.682-65.468-1.709-2.89-3.423-5.789-5.159-8.678-2.133-3.55-6.74-4.699-10.292-2.566-3.55 2.134-4.699 6.742-2.565 10.293 1.718 2.859 3.414 5.727 5.105 8.587 17.227 29.132 34.921 59.053 70.23 69.283v18.236c0 11.416 9.283 20.704 20.694 20.704h18.314c11.411 0 20.694-9.288 20.694-20.704v-18.347c35.217-10.324 52.907-40.149 70.116-69.19 1.773-2.992 3.552-5.993 5.353-8.982 2.14-3.547.998-8.157-2.549-10.297-3.547-2.138-8.156-.998-10.295 2.549-1.823 3.022-3.621 6.056-5.414 9.081-19.972 33.704-37.356 63.056-79.548 65.466v-17.296c0-24.412 14.749-82.582 50.282-112.872 52.405-44.694 101.21-33.424 114.921-28.907 12.844 4.233 19.247 9.778 21.179 12.483-.861.295-2.263.633-4.439.823-31.705 2.74-56.157 16.016-76.956 41.781-2.602 3.223-2.098 7.945 1.125 10.548 3.224 2.601 7.944 2.099 10.547-1.125 18.307-22.679 38.839-33.862 66.582-36.259 13.883-1.212 17.495-7.963 18.413-11.881 1.81-7.724-3.68-16.135-15.063-23.074zm-254.537 14.55c-9.201-6.538-18.765-11.964-28.563-16.222h28.563zm0-31.223h-36.56c.163-11.405.59-23.682 1.403-36.518h35.157zm0-51.519h-34.043c1.017-11.902 2.39-24.151 4.206-36.519h29.837zm0-51.52h-27.418c2.158-12.238 4.79-24.492 7.973-36.546h19.445zm0-51.547h-15.163c.602-1.945 1.219-3.883 1.853-5.81 3.608-10.978 7.609-21.217 11.995-30.708h1.315zm15-65.772c10.952-16.256 23.558-29.203 37.753-38.77l.023 53.023h-37.776zm0 29.253h37.782l.016 36.519h-37.798zm0 51.52h37.804l.016 36.546h-37.82zm0 51.547h37.826l.016 36.519h-37.842zm0 51.52h37.848l.016 36.518h-37.864zm0 79.733v-28.213h37.87l.016 36.547h-29.607c-2.638-2.927-5.397-5.712-8.279-8.334zm20.022 23.334h17.871l.014 33.359c-4.78-11.472-10.73-22.883-17.885-33.359zm40.26 130.292v15.33c0 3.145-2.555 5.703-5.694 5.703h-18.314c-3.14 0-5.694-2.558-5.694-5.703v-15.279c4.007.464 8.189.73 12.607.73 1.353 0 2.706-.008 4.06-.008 4.574 0 8.9-.28 13.035-.773zm-7.375-96.774-.014-33.518h17.954c-7.184 10.523-13.152 21.992-17.94 33.518zm37.617-56.552c-2.76 2.533-5.404 5.22-7.939 8.033h-29.699l-.016-36.547h37.653v28.514zm0-43.515h-37.66l-.016-36.518h37.675v36.518zm0-51.519h-37.682l-.016-36.519h37.698zm0-51.52h-37.704l-.016-36.546h37.72zm0-51.547h-37.726l-.016-36.519h37.742zm0-51.52h-37.748l-.023-53.043c14.209 9.559 26.815 22.51 37.771 38.772zm15 15.001h1.314c5.148 11.147 9.771 23.316 13.848 36.519h-15.162zm0 51.52h19.439c3.178 12.061 5.797 24.32 7.949 36.546h-27.388zm0 51.547h29.806c1.817 12.395 3.189 24.65 4.204 36.519h-34.009v-36.519zm0 119.504v-16.465h28.897c-9.918 4.311-19.594 9.821-28.897 16.465zm0-31.466v-36.518h35.126c.82 12.919 1.245 25.209 1.408 36.518z"/></g>
                    </svg>
                <% end %>
            </span>
        <% end %>    
    </div>
    <div>Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>
</div>

